<!-- Selected Skills Pills (only display, the filtering happens in app.component.html) -->
<div *ngIf="selectedSkills.length > 0" class="flex flex-wrap mt-3 mx-4 bg-white shadow-sm rounded-md p-2">
  <div *ngFor="let skill of selectedSkills" 
      class="filter-pill">
    {{ skill }}
    <button (click)="toggleSkillFilter(skill)" class="ml-1 focus:outline-none">
      <svg class="h-3 w-3 close-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
      </svg>
    </button>
  </div>
</div>

<!-- Section défilante pour les consultants - Desktop -->
<div #consultantsList class="flex-1 overflow-y-auto p-4 h-full hidden md:block" (scroll)="onScroll($event)" style="min-height: 70vh; height: calc(100vh - 200px);">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex justify-center items-center p-10">
    <div class="animate-spin h-10 w-10 border-4 border-blue-500 border-t-transparent rounded-full" role="status">
      <span class="sr-only">Chargement...</span>
    </div>
  </div>
  
  <!-- Error Message -->
  <div *ngIf="errorMessage" class="bg-red-50 border-l-4 border-red-500 text-red-700 p-4 rounded-md shadow-sm mb-4">
    {{ errorMessage }}
  </div>
  
  <!-- Empty State -->
  <div *ngIf="!isLoading && !errorMessage && filteredConsultants.length === 0" class="text-center p-10 bg-gray-50 rounded-lg">
    <p class="text-gray-500">Aucun consultant trouvé</p>
  </div>
  
  <!-- Consultants List - Desktop -->
  <div *ngIf="!isLoading && filteredConsultants.length > 0" class="space-y-4 mx-auto px-2 py-1">
    <app-consultant-card 
      *ngFor="let consultant of filteredConsultants"
      [consultant]="consultant"
      [expanded]="expandedMessages[consultant.id + '-message']"
      [messageExpanded]="expandedMessages[consultant.id]"
      [detailsExpanded]="expandedDetails[consultant.id]"
      [dropdownOpen]="dropdownOpen[consultant.id]"
      (toggleExpansion)="toggleExpandMessage(consultant.id, $event)"
      (toggleMessageExpansion)="toggleMessageExpansion(consultant.id, $event)"
      (toggleDetailsExpansion)="toggleDetailsExpansion(consultant.id, $event)"
      (toggleDropdown)="toggleDropdown(consultant.id, $event)"
      (linkedinClick)="openLinkedIn(consultant.linkedinUrl)"
      (phoneClick)="showPhone(consultant.phone)"
      (emailClick)="sendEmail(consultant.email)">
    </app-consultant-card>
  </div>
  
  <!-- Loading More Indicator -->
  <div *ngIf="isLoadingMore" class="flex justify-center items-center p-6">
    <div class="animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full" role="status">
      <span class="sr-only">Chargement...</span>
    </div>
  </div>
  
  <!-- End of Results -->
  <div *ngIf="!isLoading && !isLoadingMore && !hasMoreData && filteredConsultants.length > 0" class="text-center p-6">
    <p class="text-gray-500 text-sm">Fin des résultats</p>
  </div>
</div>

<!-- Section défilante pour les consultants - Mobile avec scrollbar masquée -->
<div #consultantsListMobile class="mobile-scrollable-container flex-1 py-2 px-0 h-full block md:hidden" (scroll)="onScroll($event)" style="min-height: 70vh; height: calc(100vh - 200px);">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="flex justify-center items-center p-6">
    <div class="animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full" role="status">
      <span class="sr-only">Chargement...</span>
    </div>
  </div>
  
  <!-- Error Message -->
  <div *ngIf="errorMessage" class="bg-red-50 border-l-4 border-red-500 text-red-700 p-3 rounded-md shadow-sm mb-3 text-sm mx-2">
    {{ errorMessage }}
  </div>
  
  <!-- Empty State -->
  <div *ngIf="!isLoading && !errorMessage && filteredConsultants.length === 0" class="text-center p-6 bg-gray-50 rounded-lg mx-2">
    <p class="text-gray-500 text-sm">Aucun consultant trouvé</p>
  </div>
  
  <!-- Consultants List - Mobile -->
  <div *ngIf="!isLoading && filteredConsultants.length > 0" class="space-y-3 mobile-full-width">
    <app-consultant-card 
      *ngFor="let consultant of filteredConsultants"
      [consultant]="consultant"
      [expanded]="expandedMessages[consultant.id + '-message']"
      [messageExpanded]="expandedMessages[consultant.id]"
      [detailsExpanded]="expandedDetails[consultant.id]"
      [dropdownOpen]="dropdownOpen[consultant.id]"
      (toggleExpansion)="toggleExpandMessage(consultant.id, $event)"
      (toggleMessageExpansion)="toggleMessageExpansion(consultant.id, $event)"
      (toggleDetailsExpansion)="toggleDetailsExpansion(consultant.id, $event)"
      (toggleDropdown)="toggleDropdown(consultant.id, $event)"
      (linkedinClick)="openLinkedIn(consultant.linkedinUrl)"
      (phoneClick)="showPhone(consultant.phone)"
      (emailClick)="sendEmail(consultant.email)">
    </app-consultant-card>
  </div>
  
  <!-- Loading More Indicator - Mobile -->
  <div *ngIf="isLoadingMore" class="flex justify-center items-center p-4">
    <div class="animate-spin h-6 w-6 border-3 border-blue-500 border-t-transparent rounded-full" role="status">
      <span class="sr-only">Chargement...</span>
    </div>
  </div>
  
  <!-- End of Results - Mobile -->
  <div *ngIf="!isLoading && !isLoadingMore && !hasMoreData && filteredConsultants.length > 0" class="text-center p-4">
    <p class="text-gray-500 text-xs">Fin des résultats</p>
  </div>
</div>