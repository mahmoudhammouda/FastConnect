<div class="add-availability-modal hidden fixed inset-0 items-center justify-center z-50">
  <div class="modal-container relative mx-auto bg-white rounded-lg shadow-xl w-11/12 md:w-4/5 lg:w-3/4 max-w-4xl max-h-[90vh] overflow-y-auto" (click)="$event.stopPropagation()">
    <!-- Corps de la modal avec le formulaire -->
    <div class="modal-body">
      <form [formGroup]="availabilityForm" (ngSubmit)="onSubmit()">
        <!-- En-tête de la modal -->
        <div class="modal-header flex justify-between items-center">
          <div class="flex items-center">
            <h2 class="text-lg font-semibold text-gray-900">Ajouter une disponibilité</h2>
          </div>
          <div class="flex items-center">
            <!-- Bouton de verrouillage -->
            <div class="flex items-center mr-4">
              <label for="profile-lock-toggle" class="text-sm text-gray-500 mr-2">Profil verrouillé</label>
              <div class="relative inline-block w-10 align-middle select-none">
                <input type="checkbox" id="profile-lock-toggle" formControlName="locked" class="sr-only peer">
                <div class="block w-10 h-6 bg-gray-200 rounded-full peer-checked:bg-blue-500"></div>
                <div class="dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition peer-checked:translate-x-4"></div>
              </div>
            </div>
            <button type="button" (click)="closeModal()" class="text-gray-500 hover:text-gray-700">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
              </svg>
            </button>
          </div>
        </div>
        <!-- URL LinkedIn et Message pour le recruteur -->
        <div class="form-section">
          <h3 class="form-section-title">Profil LinkedIn</h3>
          <div class="form-group">
            <label for="linkedinUrl">URL LinkedIn</label>
            <input type="url" id="linkedinUrl" formControlName="linkedinUrl" class="form-control" placeholder="https://www.linkedin.com/in/votre-profil">
          </div>
          <div class="form-group mt-3">
            <label for="recruiterMessage">Message à envoyer au recruteur</label>
            <div class="wysiwyg-editor bg-white border border-gray-300 rounded-md overflow-hidden">
              <!-- Barre d'outils -->
              <div class="toolbar bg-gray-100 p-2 border-b border-gray-200 flex space-x-2">
                <!-- Gras -->
                <button type="button" 
                        class="p-1 rounded hover:bg-gray-200" 
                        [class.bg-gray-300]="isBold"
                        (click)="applyTextStyle('bold')">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11.5V8a1 1 0 0 1 1-1h5a3 3 0 0 1 0 6h-5v-1.5m0 5.5h6a3 3 0 0 0 0-6H7v6z"/>
                  </svg>
                </button>
                
                <!-- Italique -->
                <button type="button" 
                        class="p-1 rounded hover:bg-gray-200" 
                        [class.bg-gray-300]="isItalic"
                        (click)="applyTextStyle('italic')">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 4.5H14M12 4.5V18.5M8 18.5H16"/>
                  </svg>
                </button>
                
                <!-- Souligné -->
                <button type="button" 
                        class="p-1 rounded hover:bg-gray-200" 
                        [class.bg-gray-300]="isUnderline"
                        (click)="applyTextStyle('underline')">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 15.5h10M9 7v5a3 3 0 1 0 6 0V7"/>
                  </svg>
                </button>
                
                <!-- Séparateur vertical -->
                <div class="w-px h-5 bg-gray-300"></div>
                
                <!-- Alignement de texte -->
                <button type="button" 
                        class="p-1 rounded hover:bg-gray-200" 
                        [class.bg-gray-300]="textAlignment === 'left'"
                        (click)="setTextAlignment('left')">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7h16M4 11h10M4 15h16"/>
                  </svg>
                </button>
                
                <button type="button" 
                        class="p-1 rounded hover:bg-gray-200" 
                        [class.bg-gray-300]="textAlignment === 'center'"
                        (click)="setTextAlignment('center')">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7h16M7 11h10M4 15h16"/>
                  </svg>
                </button>
                
                <button type="button" 
                        class="p-1 rounded hover:bg-gray-200" 
                        [class.bg-gray-300]="textAlignment === 'right'"
                        (click)="setTextAlignment('right')">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7h16M10 11h10M4 15h16"/>
                  </svg>
                </button>
              </div>
              
              <!-- Zone d'édition -->
              <div class="p-3">
                <textarea formControlName="recruiterMessage" 
                          class="w-full h-40 outline-none resize-none border-0 p-0"
                          placeholder="Entrez votre message ici..."
                          [style.fontWeight]="isBold ? 'bold' : 'normal'"
                          [style.fontStyle]="isItalic ? 'italic' : 'normal'"
                          [style.textDecoration]="isUnderline ? 'underline' : 'none'"
                          [style.textAlign]="textAlignment"></textarea>
              </div>
            </div>
          </div>
        </div>
          
        <!-- Informations principales du consultant -->
        <div class="form-section">
          <h3 class="form-section-title">Informations principales</h3>
          <div class="form-grid">
            <div class="form-group">
              <label for="role">Rôle *</label>
              <select id="role" formControlName="role" class="form-control" [class.is-invalid]="availabilityForm.get('role')?.touched && availabilityForm.get('role')?.invalid">
                <option value="">Sélectionner un rôle</option>
                <option *ngFor="let role of roleOptions" [value]="role">{{ role }}</option>
              </select>
              <div *ngIf="availabilityForm.get('role')?.touched && availabilityForm.get('role')?.invalid" class="invalid-feedback">
                Le rôle est obligatoire
              </div>
            </div>
            
            <div class="form-group">
              <label for="experienceLevel">Niveau d'expérience *</label>
              <select id="experienceLevel" formControlName="experienceLevel" class="form-control" [class.is-invalid]="availabilityForm.get('experienceLevel')?.touched && availabilityForm.get('experienceLevel')?.invalid">
                <option value="">Sélectionner un niveau</option>
                <option *ngFor="let exp of experienceOptions" [value]="exp.value">{{ exp.label }}</option>
              </select>
              <div *ngIf="availabilityForm.get('experienceLevel')?.touched && availabilityForm.get('experienceLevel')?.invalid" class="invalid-feedback">
                Le niveau d'expérience est obligatoire
              </div>
            </div>
            
            <div class="form-group">
              <label for="abbreviation">Abréviation (max 10 caractères) *</label>
              <input type="text" id="abbreviation" formControlName="abbreviation" class="form-control" [class.is-invalid]="availabilityForm.get('abbreviation')?.touched && availabilityForm.get('abbreviation')?.invalid" maxlength="10">
              <div *ngIf="availabilityForm.get('abbreviation')?.touched && availabilityForm.get('abbreviation')?.invalid" class="invalid-feedback">
                L'abréviation est obligatoire et doit faire moins de 10 caractères
              </div>
            </div>
            
            <div class="form-group">
              <label for="availabilityStatus">Statut de disponibilité *</label>
              <select id="availabilityStatus" formControlName="availabilityStatus" class="form-control" [class.is-invalid]="availabilityForm.get('availabilityStatus')?.touched && availabilityForm.get('availabilityStatus')?.invalid">
                <option value="">Sélectionner un statut</option>
                <option *ngFor="let status of availabilityOptions" [value]="status.value">{{ status.label }}</option>
              </select>
              <div *ngIf="availabilityForm.get('availabilityStatus')?.touched && availabilityForm.get('availabilityStatus')?.invalid" class="invalid-feedback">
                Le statut de disponibilité est obligatoire
              </div>
            </div>
          </div>
          
          <div class="form-grid mt-3">
            <div class="form-group">
              <label for="country">Pays *</label>
              <select id="country" formControlName="country" class="form-control" [class.is-invalid]="availabilityForm.get('country')?.touched && availabilityForm.get('country')?.invalid">
                <option value="">Sélectionner un pays</option>
                <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
              </select>
              <div *ngIf="availabilityForm.get('country')?.touched && availabilityForm.get('country')?.invalid" class="invalid-feedback">
                Le pays est obligatoire
              </div>
            </div>
            
            <div class="form-group">
              <label for="cities">Villes *</label>
              <div class="relative">
                <button type="button" 
                       id="citiesDropdownButton"
                       class="form-control text-left pr-8 flex items-center justify-between" 
                       [class.is-invalid]="availabilityForm.get('cities')?.touched && availabilityForm.get('cities')?.invalid"
                       (click)="toggleCitiesDropdown($event)">
                  <span *ngIf="selectedCities.length === 0">Sélectionner des villes</span>
                  <span *ngIf="selectedCities.length === 1">{{ selectedCities[0] }}</span>
                  <span *ngIf="selectedCities.length > 1">{{ selectedCities.length }} villes sélectionnées</span>
                  <svg class="h-4 w-4 absolute right-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </button>
                
                <div *ngIf="citiesDropdownOpen" class="absolute z-50 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto">
                  <div class="p-2">
                    <div *ngIf="availableCities.length === 0" class="text-gray-500 text-center py-2">
                      Aucune ville disponible pour ce pays
                    </div>
                    <div *ngFor="let city of availableCities" class="checkbox-group py-1">
                      <input type="checkbox" 
                            [id]="'city-' + city" 
                            [checked]="isCitySelected(city)"
                            (change)="toggleCity(city)">
                      <label [for]="'city-' + city" class="ml-2 text-sm">{{ city }}</label>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngIf="availabilityForm.get('cities')?.touched && availabilityForm.get('cities')?.invalid" class="invalid-feedback">
                Veuillez sélectionner au moins une ville
              </div>
              <div *ngIf="selectedCities.length > 0" class="mt-2 flex flex-wrap gap-1">
                <div *ngFor="let city of selectedCities" class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-md flex items-center">
                  {{ city }}
                  <button type="button" (click)="removeCity(city)" class="ml-1 text-blue-600 hover:text-blue-800">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
          
          <div class="form-grid mt-3">
            <div class="form-group">
              <label for="tjm">TJM (Taux Journalier Moyen)</label>
              <input type="number" id="tjm" formControlName="tjm" class="form-control" [class.is-invalid]="availabilityForm.get('tjm')?.touched && (availabilityForm.get('tjm')?.errors?.['min'] || availabilityForm.get('tjm')?.errors?.['pattern'])">
              <div *ngIf="availabilityForm.get('tjm')?.touched && (availabilityForm.get('tjm')?.errors?.['min'] || availabilityForm.get('tjm')?.errors?.['pattern'])" class="invalid-feedback">
                Le TJM doit être un nombre positif
              </div>
            </div>
            
            <!-- Type d'engagement -->
            <div class="form-group">
              <label for="engagementType">Type d'engagement *</label>
              <select id="engagementType" formControlName="engagementType" class="form-control" [class.is-invalid]="availabilityForm.get('engagementType')?.touched && availabilityForm.get('engagementType')?.invalid">
                <option value="">Sélectionner un type</option>
                <option *ngFor="let type of engagementTypes" [value]="type">{{ type }}</option>
              </select>
              <div *ngIf="availabilityForm.get('engagementType')?.touched && availabilityForm.get('engagementType')?.invalid" class="invalid-feedback">
                Le type d'engagement est obligatoire
              </div>
            </div>
          </div>
          
          <!-- Mode de travail -->
          <div class="form-grid mt-3">
            <div class="form-group">
              <label for="workModes">Mode de travail souhaité *</label>
              <div class="relative">
                <button type="button" 
                       id="workModesDropdownButton"
                       class="form-control text-left pr-8 flex items-center justify-between" 
                       [class.is-invalid]="availabilityForm.get('workModes')?.touched && availabilityForm.get('workModes')?.invalid"
                       (click)="toggleWorkModesDropdown($event)">
                  <span *ngIf="selectedWorkModes.length === 0">Sélectionner un mode de travail</span>
                  <span *ngIf="selectedWorkModes.length === 1">{{ selectedWorkModes[0] }}</span>
                  <span *ngIf="selectedWorkModes.length > 1">{{ selectedWorkModes.length }} modes sélectionnés</span>
                  <svg class="h-4 w-4 absolute right-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                  </svg>
                </button>
                
                <div *ngIf="workModesDropdownOpen" class="absolute z-50 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto">
                  <div class="p-2">
                    <div *ngFor="let mode of workModes" class="checkbox-group py-1">
                      <input type="checkbox" 
                            [id]="'mode-' + mode" 
                            [checked]="isWorkModeSelected(mode)"
                            (change)="toggleWorkMode(mode)">
                      <label [for]="'mode-' + mode" class="ml-2 text-sm">{{ mode }}</label>
                    </div>
                  </div>
                </div>
              </div>
              <div *ngIf="availabilityForm.get('workModes')?.touched && availabilityForm.get('workModes')?.invalid" class="invalid-feedback">
                Veuillez sélectionner au moins un mode de travail
              </div>
              <div *ngIf="selectedWorkModes.length > 0" class="mt-2 flex flex-wrap gap-1">
                <div *ngFor="let mode of selectedWorkModes" class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-md flex items-center">
                  {{ mode }}
                  <button type="button" (click)="removeWorkMode(mode)" class="ml-1 text-blue-600 hover:text-blue-800">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Compétences -->
        <div class="form-section">
          <h3 class="form-section-title">Compétences</h3>
          <div class="form-group">
            <label>Compétences techniques</label>
            <div class="relative">
              <button type="button" 
                     class="form-control text-left pr-8 flex items-center justify-between" 
                     (click)="toggleSkillsDropdown($event)">
                <span *ngIf="(availabilityForm.get('skills')?.value || []).length === 0">Sélectionner des compétences</span>
                <span *ngIf="(availabilityForm.get('skills')?.value || []).length === 1">{{ availabilityForm.get('skills')?.value[0] }}</span>
                <span *ngIf="(availabilityForm.get('skills')?.value || []).length > 1">{{ availabilityForm.get('skills')?.value.length }} compétences sélectionnées</span>
                <svg class="h-4 w-4 absolute right-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              
              <div *ngIf="skillsDropdownOpen" class="absolute z-50 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto">
                <div class="p-2">
                  <div *ngFor="let skill of skillsList" class="checkbox-group py-1">
                    <input type="checkbox" 
                          [id]="'skill-' + skill" 
                          [checked]="isSkillSelected(skill)"
                          (change)="toggleSkill(skill)">
                    <label [for]="'skill-' + skill" class="ml-2 text-sm">{{ skill }}</label>
                  </div>
                  <!-- Option pour ajouter une nouvelle compétence -->
                  <div class="mt-2 pt-2 border-t border-gray-200">
                    <div class="flex items-center">
                      <input type="text" class="form-control flex-1" placeholder="Nouvelle compétence" #newSkillInput>
                      <button type="button" class="btn btn-sm btn-secondary ml-2" (click)="addSkill(newSkillInput.value); newSkillInput.value = '';">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="(availabilityForm.get('skills')?.value || []).length > 0" class="mt-2 flex flex-wrap gap-1">
              <div *ngFor="let skill of availabilityForm.get('skills')?.value" class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-md flex items-center">
                {{ skill }}
                <button type="button" (click)="removeSkill(skill)" class="ml-1 text-blue-600 hover:text-blue-800">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          
          <!-- Secteurs d'activité -->
          <div class="form-group mt-3">
            <label>Secteurs d'activité</label>
            <div class="relative">
              <button type="button" 
                     class="form-control text-left pr-8 flex items-center justify-between" 
                     (click)="toggleSectorsDropdown($event)">
                <span *ngIf="(availabilityForm.get('selectedSectors')?.value || []).length === 0">Sélectionner des secteurs</span>
                <span *ngIf="(availabilityForm.get('selectedSectors')?.value || []).length === 1">{{ availabilityForm.get('selectedSectors')?.value[0] }}</span>
                <span *ngIf="(availabilityForm.get('selectedSectors')?.value || []).length > 1">{{ availabilityForm.get('selectedSectors')?.value.length }} secteurs sélectionnés</span>
                <svg class="h-4 w-4 absolute right-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                </svg>
              </button>
              
              <div *ngIf="sectorsDropdownOpen" class="absolute z-50 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto">
                <div class="p-2">
                  <div *ngFor="let sector of sectors" class="checkbox-group py-1">
                    <input type="checkbox" 
                          [id]="'sector-' + sector" 
                          [checked]="isSectorSelected(sector)"
                          (change)="toggleSector(sector)">
                    <label [for]="'sector-' + sector" class="ml-2 text-sm">{{ sector }}</label>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="(availabilityForm.get('selectedSectors')?.value || []).length > 0" class="mt-2 flex flex-wrap gap-1">
              <div *ngFor="let sector of availabilityForm.get('selectedSectors')?.value" class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-md flex items-center">
                {{ sector }}
                <button type="button" (click)="removeSector(sector)" class="ml-1 text-blue-600 hover:text-blue-800">
                  <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                  </svg>
                </button>
              </div>
            </div>
          </div>
          
          <!-- Expertises supprimées pour réduire la taille du formulaire -->
        </div>
        
        <!-- Notes supplémentaires supprimées pour réduire la taille du formulaire -->
        
        <!-- Gestion de sous-traitance (pour les recruteurs) -->
        <div class="form-section">
          <div class="checkbox-group mb-3">
            <input type="checkbox" id="isSubcontractor" formControlName="isSubcontractor">
            <label for="isSubcontractor">Ce profil est proposé en sous-traitance</label>
          </div>
          
          <div *ngIf="availabilityForm.get('isSubcontractor')?.value" class="subcontractor-profiles">
            <div class="subcontractor-header">
              <h3 class="form-section-title mb-0">Profils sous-traitants associés</h3>
              <button type="button" class="btn btn-secondary" (click)="addSubcontractorProfile()">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                </svg>
                Ajouter un profil
              </button>
            </div>
            
            <div *ngIf="subcontractorProfiles.length === 0" class="text-gray-500 text-sm text-center py-4">
              Aucun profil sous-traitant ajouté. Cliquez sur "Ajouter un profil" pour commencer.
            </div>
            
            <div *ngFor="let profile of subcontractorProfiles.controls; let i = index" class="profile-card">
              <div class="profile-content">
                <div class="profile-card-header">
                  <h4 class="font-medium text-sm">Profil sous-traitant #{{ i + 1 }}</h4>
                  <button type="button" class="text-red-500 hover:text-red-700" (click)="removeSubcontractorProfile(i)">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                  </button>
                </div>
                
                <div class="form-grid">
                  <div class="form-group">
                    <label>Nom du sous-traitant *</label>
                    <input type="text" class="form-control">
                  </div>
                  
                  <div class="form-group">
                    <label>Rôle *</label>
                    <select class="form-control">
                      <option value="">Sélectionner un rôle</option>
                      <option *ngFor="let role of roleOptions" [value]="role">{{ role }}</option>
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label>Niveau d'expérience *</label>
                    <select class="form-control">
                      <option value="">Sélectionner un niveau</option>
                      <option *ngFor="let exp of experienceOptions" [value]="exp.value">{{ exp.label }}</option>
                    </select>
                  </div>
                  
                  <div class="form-group">
                    <label>TJM</label>
                    <input type="number" class="form-control">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Message d'erreur global -->
        <div *ngIf="submitError" class="mt-3 p-3 bg-red-100 border border-red-200 text-red-700 rounded-md text-sm">
          {{ submitError }}
        </div>
        
        <!-- Boutons d'action -->
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" (click)="closeModal()">
            Annuler
          </button>
          <button type="submit" class="btn btn-primary" [disabled]="isSubmitting">
            <span *ngIf="isSubmitting" class="spinner"></span>
            {{ isSubmitting ? 'Enregistrement...' : 'Enregistrer' }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>