<div class="flex justify-center w-full h-screen flex-col overflow-hidden">
  <!-- DÉBOGEUR STATIQUE -->
  <div style="position: fixed; top: 0; left: 0; right: 0; background-color: #2563eb; color: white; padding: 5px; text-align: center; font-size: 14px; z-index: 9999;">
    FastConnect v1.0 - Environnement: {{ debugInfo.environment }} - Base: {{ debugInfo.baseHref }}
    <span class="ml-2 text-yellow-200">
      <a routerLink="/debug" class="underline hover:text-white">Debug</a>
    </span>
  </div>

  <div class="w-full max-w-3xl mx-auto flex flex-col h-full">
    <!-- Header Section en position fixe -->
    <div class="bg-gray-50 p-4 shadow-md z-40 mt-8">
      <div class="flex items-center justify-between">
        <h1 class="text-xl font-bold">
          <a routerLink="/" class="hover:text-indigo-600 transition duration-150">
            {{ title }}
          </a>
        </h1>
        
        <div class="flex items-center">
          <!-- User not authenticated -->
          <div *ngIf="!isAuthenticated" class="flex items-center space-x-4">
            <button 
              (click)="openLoginModal()" 
              class="px-3 py-1.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-150 text-sm">
              Connexion
            </button>
          </div>
          
          <!-- User authenticated -->
          <div *ngIf="isAuthenticated" class="relative">
            <button 
              (click)="toggleMenu()" 
              class="flex items-center text-sm font-medium text-gray-700 hover:text-indigo-600 focus:outline-none transition duration-150"
              aria-expanded="false"
            >
              <span class="hidden md:inline mr-1">{{ currentUser?.firstName || currentUser?.username }}</span>
              <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
              </svg>
            </button>
            
            <!-- Dropdown Menu -->
            <div 
              *ngIf="menuOpen" 
              class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 ring-1 ring-black ring-opacity-5"
            >
              <a 
                routerLink="/profile" 
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150"
                (click)="toggleMenu()"
              >
                Mon profil
              </a>

              <!-- Liens spécifiques au rôle -->
              <a 
                *ngIf="currentUser?.role === 'admin'" 
                routerLink="/admin" 
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150"
                (click)="toggleMenu()"
              >
                Administration
              </a>
              
              <a 
                *ngIf="currentUser?.role === 'consultant'" 
                routerLink="/consultant-profile" 
                class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition duration-150"
                (click)="toggleMenu()"
              >
                Mon profil consultant
              </a>
              
              <div class="border-t border-gray-100 my-1"></div>
              <button 
                (click)="logout()" 
                class="block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 transition duration-150"
              >
                Déconnexion
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Route principale (consultants ou autre contenu) -->
    <router-outlet></router-outlet>
    
    <!-- Afficher la liste des consultants sur la route principale directement si nécessaire -->
    <!-- <app-consultant-list *ngIf="currentRoute === '/' || currentRoute === '/consultants'"></app-consultant-list> -->
  </div>
  
  <!-- Login Modal Component -->
  <app-login></app-login>
  
  <!-- Modal Backdrop -->
  <div 
    *ngIf="modalService.isModalBackdropVisible" 
    class="fixed inset-0 bg-black bg-opacity-50 z-40"
    (click)="modalService.closeAllModals()"
  ></div>
</div>